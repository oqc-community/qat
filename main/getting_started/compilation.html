

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Compilation &mdash; qat-compiler 0.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=4f649999" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_paramlinks.css" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Execution" href="execution.html" />
    <link rel="prev" title="Pipelines" href="pipelines.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            qat-compiler
              <img src="../_static/qat-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Getting started with QAT</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="hardware_models.html">Hardware models</a></li>
<li class="toctree-l2"><a class="reference internal" href="compiler_config.html">Compiler Config</a></li>
<li class="toctree-l2"><a class="reference internal" href="pipelines.html">Pipelines</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution.html">Execution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">src</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../qat.html">qat package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../qat.backend.html">qat.backend package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../qat.backend.passes.html">qat.backend.passes package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../qat.backend.passes.legacy.html">qat.backend.passes.legacy package</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../qat.backend.passes.legacy.analysis.html">qat.backend.passes.legacy.analysis module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.backend.passes.legacy.lowering.html">qat.backend.passes.legacy.lowering module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.backend.passes.legacy.transform.html">qat.backend.passes.legacy.transform module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.backend.passes.legacy.validation.html">qat.backend.passes.legacy.validation module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../qat.backend.passes.analysis.html">qat.backend.passes.analysis module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.backend.passes.lowering.html">qat.backend.passes.lowering module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.backend.passes.validation.html">qat.backend.passes.validation module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../qat.backend.waveform_v1.html">qat.backend.waveform_v1 package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../qat.backend.waveform_v1.codegen.html">qat.backend.waveform_v1.codegen module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.backend.waveform_v1.executable.html">qat.backend.waveform_v1.executable module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../qat.backend.base.html">qat.backend.base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.backend.codegen_base.html">qat.backend.codegen_base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.backend.fallthrough.html">qat.backend.fallthrough module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.backend.graph.html">qat.backend.graph module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../qat.core.html">qat.core package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../qat.core.config.html">qat.core.config package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../qat.core.config.configure.html">qat.core.config.configure module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.core.config.descriptions.html">qat.core.config.descriptions module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.core.config.session.html">qat.core.config.session module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.core.config.validators.html">qat.core.config.validators module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../qat.core.metrics_base.html">qat.core.metrics_base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.core.pass_base.html">qat.core.pass_base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.core.pipeline.html">qat.core.pipeline module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.core.qat.html">qat.core.qat module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.core.result_base.html">qat.core.result_base module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../qat.engines.html">qat.engines package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../qat.engines.waveform_v1.html">qat.engines.waveform_v1 package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../qat.engines.waveform_v1.echo.html">qat.engines.waveform_v1.echo module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../qat.engines.native.html">qat.engines.native module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.engines.zero.html">qat.engines.zero module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../qat.frontend.html">qat.frontend package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../qat.frontend.parsers.html">qat.frontend.parsers package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../qat.frontend.parsers.qasm.html">qat.frontend.parsers.qasm package</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../qat.frontend.parsers.qasm.base.html">qat.frontend.parsers.qasm.base module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.frontend.parsers.qasm.qasm2.html">qat.frontend.parsers.qasm.qasm2 module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.frontend.parsers.qasm.qasm3.html">qat.frontend.parsers.qasm.qasm3 module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../qat.frontend.parsers.qir.html">qat.frontend.parsers.qir module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../qat.frontend.passes.html">qat.frontend.passes package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../qat.frontend.passes.legacy.html">qat.frontend.passes.legacy package</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../qat.frontend.passes.legacy.transform.html">qat.frontend.passes.legacy.transform module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../qat.frontend.passes.analysis.html">qat.frontend.passes.analysis module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.frontend.passes.transform.html">qat.frontend.passes.transform module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../qat.frontend.auto.html">qat.frontend.auto module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.frontend.base.html">qat.frontend.base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.frontend.circuit_builder.html">qat.frontend.circuit_builder module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.frontend.custom.html">qat.frontend.custom module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.frontend.fallthrough.html">qat.frontend.fallthrough module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.frontend.qasm.html">qat.frontend.qasm module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.frontend.qir.html">qat.frontend.qir module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.frontend.register.html">qat.frontend.register module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../qat.integrations.html">qat.integrations package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../qat.integrations.tket.html">qat.integrations.tket module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../qat.ir.html">qat.ir package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../qat.ir.gates.html">qat.ir.gates package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../qat.ir.gates.base.html">qat.ir.gates.base module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.ir.gates.gates_1q.html">qat.ir.gates.gates_1q module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.ir.gates.gates_2q.html">qat.ir.gates.gates_2q module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.ir.gates.native.html">qat.ir.gates.native module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.ir.gates.operation.html">qat.ir.gates.operation module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../qat.ir.conversion.html">qat.ir.conversion module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.ir.instruction_builder.html">qat.ir.instruction_builder module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.ir.instructions.html">qat.ir.instructions module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.ir.lowered.html">qat.ir.lowered module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.ir.measure.html">qat.ir.measure module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.ir.qat_ir.html">qat.ir.qat_ir module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.ir.waveforms.html">qat.ir.waveforms module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../qat.middleend.html">qat.middleend package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../qat.middleend.decompositions.html">qat.middleend.decompositions package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../qat.middleend.decompositions.base.html">qat.middleend.decompositions.base module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.middleend.decompositions.gates.html">qat.middleend.decompositions.gates module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.middleend.decompositions.pulses.html">qat.middleend.decompositions.pulses module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../qat.middleend.passes.html">qat.middleend.passes package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../qat.middleend.passes.gates.html">qat.middleend.passes.gates package</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../qat.middleend.passes.gates.transform.html">qat.middleend.passes.gates.transform module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.middleend.passes.gates.validation.html">qat.middleend.passes.gates.validation module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../qat.middleend.passes.legacy.html">qat.middleend.passes.legacy package</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../qat.middleend.passes.legacy.analysis.html">qat.middleend.passes.legacy.analysis module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.middleend.passes.legacy.transform.html">qat.middleend.passes.legacy.transform module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.middleend.passes.legacy.validation.html">qat.middleend.passes.legacy.validation module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../qat.middleend.passes.transform.html">qat.middleend.passes.transform module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.middleend.passes.validation.html">qat.middleend.passes.validation module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../qat.middleend.middleends.html">qat.middleend.middleends module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../qat.model.html">qat.model package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../qat.model.loaders.html">qat.model.loaders package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../qat.model.loaders.legacy.html">qat.model.loaders.legacy package</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../qat.model.loaders.legacy.base.html">qat.model.loaders.legacy.base module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.model.loaders.legacy.echo.html">qat.model.loaders.legacy.echo module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.model.loaders.legacy.file.html">qat.model.loaders.legacy.file module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.model.loaders.legacy.lucy.html">qat.model.loaders.legacy.lucy module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.model.loaders.legacy.qiskit.html">qat.model.loaders.legacy.qiskit module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.model.loaders.legacy.rtcs.html">qat.model.loaders.legacy.rtcs module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../qat.model.loaders.base.html">qat.model.loaders.base module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.model.loaders.converted.html">qat.model.loaders.converted module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.model.loaders.file.html">qat.model.loaders.file module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../qat.model.builder.html">qat.model.builder module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.model.convert_legacy.html">qat.model.convert_legacy module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.model.device.html">qat.model.device module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.model.error_mitigation.html">qat.model.error_mitigation module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.model.hardware_model.html">qat.model.hardware_model module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.model.target_data.html">qat.model.target_data module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../qat.pipelines.html">qat.pipelines package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../qat.pipelines.legacy.html">qat.pipelines.legacy package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../qat.pipelines.legacy.base.html">qat.pipelines.legacy.base module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.pipelines.legacy.echo.html">qat.pipelines.legacy.echo module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.pipelines.legacy.qiskit.html">qat.pipelines.legacy.qiskit module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.pipelines.legacy.rtcs.html">qat.pipelines.legacy.rtcs module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../qat.pipelines.echo.html">qat.pipelines.echo module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.pipelines.qiskit.html">qat.pipelines.qiskit module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.pipelines.rtcs.html">qat.pipelines.rtcs module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../qat.purr.html">qat.purr package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../qat.purr.backends.html">qat.purr.backends package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.backends.calibrations.html">qat.purr.backends.calibrations package</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.calibrations.remote.html">qat.purr.backends.calibrations.remote module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.backends.qblox.html">qat.purr.backends.qblox package</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.execution.html">qat.purr.backends.qblox.execution package</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.acquisition.html">qat.purr.backends.qblox.acquisition module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.analysis_passes.html">qat.purr.backends.qblox.analysis_passes module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.codegen.html">qat.purr.backends.qblox.codegen module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.codegen_base.html">qat.purr.backends.qblox.codegen_base module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.config.html">qat.purr.backends.qblox.config module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.constants.html">qat.purr.backends.qblox.constants module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.device.html">qat.purr.backends.qblox.device module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.graph.html">qat.purr.backends.qblox.graph module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.ir.html">qat.purr.backends.qblox.ir module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.live.html">qat.purr.backends.qblox.live module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.loader.html">qat.purr.backends.qblox.loader module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.metrics_base.html">qat.purr.backends.qblox.metrics_base module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.model_base.html">qat.purr.backends.qblox.model_base module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.pass_base.html">qat.purr.backends.qblox.pass_base module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.result_base.html">qat.purr.backends.qblox.result_base module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.transform_passes.html">qat.purr.backends.qblox.transform_passes module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.backends.qblox.visualisation.html">qat.purr.backends.qblox.visualisation module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.backends.echo.html">qat.purr.backends.echo module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.backends.live.html">qat.purr.backends.live module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.backends.live_devices.html">qat.purr.backends.live_devices module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.backends.qiskit_simulator.html">qat.purr.backends.qiskit_simulator module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.backends.realtime_chip_simulator.html">qat.purr.backends.realtime_chip_simulator module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.backends.utilities.html">qat.purr.backends.utilities module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.backends.verification.html">qat.purr.backends.verification module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../qat.purr.compiler.html">qat.purr.compiler package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.compiler.error_mitigation.html">qat.purr.compiler.error_mitigation package</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.compiler.error_mitigation.readout_mitigation.html">qat.purr.compiler.error_mitigation.readout_mitigation module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.compiler.experimental.html">qat.purr.compiler.experimental package</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../qat.purr.compiler.experimental.frontends.html">qat.purr.compiler.experimental.frontends module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.compiler.builders.html">qat.purr.compiler.builders module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.compiler.caches.html">qat.purr.compiler.caches module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.compiler.devices.html">qat.purr.compiler.devices module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.compiler.emitter.html">qat.purr.compiler.emitter module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.compiler.execution.html">qat.purr.compiler.execution module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.compiler.frontends.html">qat.purr.compiler.frontends module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.compiler.hardware_models.html">qat.purr.compiler.hardware_models module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.compiler.instructions.html">qat.purr.compiler.instructions module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.compiler.interrupt.html">qat.purr.compiler.interrupt module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.compiler.metrics.html">qat.purr.compiler.metrics module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.compiler.optimisers.html">qat.purr.compiler.optimisers module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.compiler.runtime.html">qat.purr.compiler.runtime module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.compiler.transform_passes.html">qat.purr.compiler.transform_passes module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.compiler.validation_passes.html">qat.purr.compiler.validation_passes module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.compiler.waveforms.html">qat.purr.compiler.waveforms module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../qat.purr.integrations.html">qat.purr.integrations package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.integrations.features.html">qat.purr.integrations.features module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.integrations.qasm.html">qat.purr.integrations.qasm module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.integrations.qir.html">qat.purr.integrations.qir module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.integrations.qiskit.html">qat.purr.integrations.qiskit module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.integrations.tket.html">qat.purr.integrations.tket module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../qat.purr.utils.html">qat.purr.utils package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.utils.benchmarking.html">qat.purr.utils.benchmarking module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.utils.logger.html">qat.purr.utils.logger module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.utils.logging_utils.html">qat.purr.utils.logging_utils module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.purr.utils.serializer.html">qat.purr.utils.serializer module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../qat.purr.qat.html">qat.purr.qat module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.purr.qatconfig.html">qat.purr.qatconfig module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../qat.runtime.html">qat.runtime package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../qat.runtime.passes.html">qat.runtime.passes package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../qat.runtime.passes.legacy.html">qat.runtime.passes.legacy package</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../qat.runtime.passes.legacy.analysis.html">qat.runtime.passes.legacy.analysis module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../qat.runtime.passes.legacy.transform.html">qat.runtime.passes.legacy.transform module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../qat.runtime.passes.analysis.html">qat.runtime.passes.analysis module</a></li>
<li class="toctree-l5"><a class="reference internal" href="../qat.runtime.passes.transform.html">qat.runtime.passes.transform module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../qat.runtime.base.html">qat.runtime.base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.runtime.connection.html">qat.runtime.connection module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.runtime.executables.html">qat.runtime.executables module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.runtime.legacy.html">qat.runtime.legacy module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.runtime.post_processing.html">qat.runtime.post_processing module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.runtime.results_processing.html">qat.runtime.results_processing module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.runtime.simple.html">qat.runtime.simple module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../qat.utils.html">qat.utils package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../qat.utils.graphs.html">qat.utils.graphs module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.utils.hardware_model.html">qat.utils.hardware_model module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.utils.piny.html">qat.utils.piny module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.utils.pydantic.html">qat.utils.pydantic module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.utils.qasm.html">qat.utils.qasm module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.utils.state_tensors.html">qat.utils.state_tensors module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../qat.utils.waveform.html">qat.utils.waveform module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../qat.extensions.html">qat.extensions module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coc.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contributing to QAT</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">qat-compiler</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Getting started with QAT</a></li>
      <li class="breadcrumb-item active">Compilation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/getting_started/compilation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             


  <section id="compilation">
<span id="id1"></span><h1><a class="toc-backref" href="#id2" role="doc-backlink">Compilation</a><a class="headerlink" href="#compilation" title="Link to this heading"></a></h1>
<p>As was shown previously, the compilation of source programs can be achieved in pipelines by
using <a class="reference internal" href="../qat.core.qat.html#qat.core.qat.QAT.compile" title="qat.core.qat.QAT.compile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QAT.compile()</span></code></a>. This would retrieve a pipeline and
use its various modules to compile the source program. Loosely speaking, these modules can
be separated into three different stages: the <strong>frontend</strong>, <strong>middleend</strong> and <strong>backend</strong>.
The source code enters the front end, which compiles it to QAT’s intermediate representation
(IR). This enters the middle end, which analyses, validates and optimises it. Finally,
the modified QAT IR enters the backend, which generates native code for the target device.</p>
<img alt="../_images/compile.png" src="../_images/compile.png" />
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#compilation" id="id2">Compilation</a></p>
<ul>
<li><p><a class="reference internal" href="#frontend" id="id3">Frontend</a></p>
<ul>
<li><p><a class="reference internal" href="#qasm2-example" id="id4">QASM2 example</a></p></li>
<li><p><a class="reference internal" href="#automatically-chosen-frontends" id="id5">Automatically chosen frontends</a></p></li>
<li><p><a class="reference internal" href="#alternative-frontends" id="id6">Alternative frontends</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#middleend" id="id7">Middleend</a></p>
<ul>
<li><p><a class="reference internal" href="#default-middleend" id="id8">Default Middleend</a></p></li>
<li><p><a class="reference internal" href="#custom-middleend" id="id9">Custom Middleend</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#backend" id="id10">Backend</a></p>
<ul>
<li><p><a class="reference internal" href="#waveformv1backend-example" id="id11">WaveformV1Backend example</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#making-ends-meet" id="id12">Making ends meet</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="frontend">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Frontend</a><a class="headerlink" href="#frontend" title="Link to this heading"></a></h2>
<p>The frontend describes the front-facing part of the compiler.
It’s responsible for dealing with the semantics of the source language, and compiling it
into QAT’s intermediate representation (IR) which is independent of source language. A
frontend is usually defined by two components:</p>
<ol class="arabic simple">
<li><p>A pipeline which can be used to validate and modify the provided source program (before
compiling to QAT IR), see <a class="reference internal" href="../qat.frontend.passes.html#module-qat.frontend.passes" title="qat.frontend.passes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">qat.frontend.passes</span></code></a> for a list of passes available.</p></li>
<li><p>A parser that generates an abstract syntax tree (AST) from the source program, and
interprets the tree to produce QAT IR.</p></li>
</ol>
<p>The general rule of thumb is that there is a single frontend per type of source program.
Currently, QAT supports source programs in the following formats through their appropriate
frontends:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://arxiv.org/abs/1707.03429">QASM2</a>:
<a class="reference internal" href="../qat.frontend.qasm.html#qat.frontend.qasm.Qasm2Frontend" title="qat.frontend.qasm.Qasm2Frontend"><code class="xref py py-class docutils literal notranslate"><span class="pre">Qasm2Frontend</span></code></a></p></li>
<li><p><a class="reference external" href="https://arxiv.org/abs/2104.14722">QASM3</a>:
<a class="reference internal" href="../qat.frontend.qasm.html#qat.frontend.qasm.Qasm3Frontend" title="qat.frontend.qasm.Qasm3Frontend"><code class="xref py py-class docutils literal notranslate"><span class="pre">Qasm3Frontend</span></code></a></p></li>
<li><p><a class="reference external" href="https://www.qir-alliance.org/qir-book/">QIR</a>:
<a class="reference internal" href="../qat.frontend.qir.html#qat.frontend.qir.QIRFrontend" title="qat.frontend.qir.QIRFrontend"><code class="xref py py-class docutils literal notranslate"><span class="pre">QIRFrontend</span></code></a></p></li>
</ul>
<section id="qasm2-example">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">QASM2 example</a><a class="headerlink" href="#qasm2-example" title="Link to this heading"></a></h3>
<p>Each frontend can be provided with a compilation pipeline, with a suitable default already
chosen for each. As an example, let’s try to compile a QASM2 program</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">qat.frontend.qasm</span><span class="w"> </span><span class="kn">import</span> <span class="n">Qasm2Frontend</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">qat.model.loaders.legacy</span><span class="w"> </span><span class="kn">import</span> <span class="n">EchoModelLoader</span>
<span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">qat.frontend.analysis_passes</span><span class="w"> </span><span class="kn">import</span> <span class="n">InputAnalysis</span>
<span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">qat.frontend.transform_passes</span><span class="w"> </span><span class="kn">import</span> <span class="n">InputOptimisation</span>
<span class="linenos"> 5</span><span class="kn">from</span><span class="w"> </span><span class="nn">qat.passes.pass_base</span><span class="w"> </span><span class="kn">import</span> <span class="n">PassManager</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">qasm_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="s2">OPENQASM 2.0;</span>
<span class="linenos"> 9</span><span class="s2">include &quot;qelib1.inc&quot;;</span>
<span class="linenos">10</span><span class="s2">qreg q[2];</span>
<span class="linenos">11</span><span class="s2">creg c[2];</span>
<span class="linenos">12</span><span class="s2">h q[0];</span>
<span class="linenos">13</span><span class="s2">cx q[0], q[1];</span>
<span class="linenos">14</span><span class="s2">measure q -&gt; c;</span>
<span class="linenos">15</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="n">model</span> <span class="o">=</span> <span class="n">EchoModelLoader</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="linenos">18</span><span class="n">pipeline</span> <span class="o">=</span> <span class="n">PassManager</span><span class="p">()</span> <span class="o">|</span> <span class="n">InputAnalysis</span><span class="p">()</span> <span class="o">|</span> <span class="n">InputOptimisation</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="linenos">19</span><span class="n">frontend</span> <span class="o">=</span> <span class="n">Qasm2Frontend</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">pipeline</span><span class="o">=</span><span class="n">pipeline</span><span class="p">)</span>
<span class="linenos">20</span><span class="n">ir</span> <span class="o">=</span> <span class="n">frontend</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">qasm_str</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="code docutils literal notranslate"><span class="pre">ir</span></code> emitted is an instruction builder that contains QAT IR, and can now be used
within the middleend of the compilation.</p>
</section>
<section id="automatically-chosen-frontends">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Automatically chosen frontends</a><a class="headerlink" href="#automatically-chosen-frontends" title="Link to this heading"></a></h3>
<p>Often enough, we are not explicitly told what is the type of source program. We need
to infer the type and then decide on the correct frontend to use. We would also like to
avoid defining individual pipelines for each type of source program: it is sometimes
expected that the middleend and backend will be the same regardless of the type of source
program. For these reasons, it makes sense to have an automatic frontend that inspects the
source program to determine and deploy the matching frontend.</p>
<p>This is achieved in QAT using the <a class="reference internal" href="../qat.frontend.auto.html#qat.frontend.auto.AutoFrontend" title="qat.frontend.auto.AutoFrontend"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoFrontend</span></code></a>.
This frontend is provided with a list of frontends and attempts to match the source
program with one of the given frontends. If a frontend is found to be compatible with the
source program, it is used. Defining an automatic frontend might look something like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">frontend</span> <span class="o">=</span> <span class="n">AutoFrontend</span><span class="p">(</span>
    <span class="n">model</span><span class="p">,</span>
    <span class="n">Qasm2Frontend</span><span class="p">(</span><span class="n">model</span><span class="p">),</span>
    <span class="n">Qasm3Frontend</span><span class="p">(</span><span class="n">model</span><span class="p">),</span>
    <span class="n">QIRFrontend</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The natural question that follows is “how does a frontend know if it is compatible with
the source program?” Each source-language specific frontend must be equipped with a
<a class="reference internal" href="../qat.frontend.base.html#qat.frontend.base.BaseFrontend.check_and_return_source" title="qat.frontend.base.BaseFrontend.check_and_return_source"><code class="xref py py-meth docutils literal notranslate"><span class="pre">check_and_return_source</span></code></a>
method that inspects the contents of the source program, and returns it if it is found to be
compatible.</p>
<p>Let’s consider a simple example to demonstrate how a custom frontend can be used within an
<a class="reference internal" href="../qat.frontend.auto.html#qat.frontend.auto.AutoFrontend" title="qat.frontend.auto.AutoFrontend"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoFrontend</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">qat.frontend</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseFrontend</span><span class="p">,</span> <span class="n">AutoFrontend</span><span class="p">,</span> <span class="n">Qasm2Frontend</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">qat.purr.backends.echo</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_default_echo_hardware</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">class</span><span class="w"> </span><span class="nc">MyCustomFrontend</span><span class="p">(</span><span class="n">BaseFrontend</span><span class="p">):</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span>    <span class="k">def</span><span class="w"> </span><span class="nf">check_and_return_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src</span><span class="p">):</span>
<span class="linenos"> 7</span>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<span class="linenos"> 8</span>            <span class="k">return</span> <span class="kc">False</span>
<span class="linenos"> 9</span>        <span class="k">if</span> <span class="s2">&quot;this is a fancy new source language&quot;</span> <span class="ow">in</span> <span class="n">src</span><span class="p">:</span>
<span class="linenos">10</span>            <span class="k">return</span> <span class="n">src</span>
<span class="linenos">11</span>        <span class="k">return</span> <span class="kc">False</span>
<span class="linenos">12</span>
<span class="linenos">13</span>    <span class="k">def</span><span class="w"> </span><span class="nf">emit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<span class="linenos">14</span>        <span class="k">return</span> <span class="n">src</span>
<span class="linenos">15</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="n">qasm_program</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">18</span><span class="s2">OPENQASM 2.0;</span>
<span class="linenos">19</span><span class="s2">include &quot;qelib1.inc&quot;;</span>
<span class="linenos">20</span><span class="s2">qreg q[2];</span>
<span class="linenos">21</span><span class="s2">creg c[2];</span>
<span class="linenos">22</span><span class="s2">h q[0];</span>
<span class="linenos">23</span><span class="s2">cx q[0], q[1];</span>
<span class="linenos">24</span><span class="s2">measure q -&gt; c;</span>
<span class="linenos">25</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">26</span><span class="n">custom_program</span> <span class="o">=</span> <span class="s2">&quot;this is a fancy new source language&quot;</span>
<span class="linenos">27</span><span class="n">invalid_program</span> <span class="o">=</span> <span class="s2">&quot;this will not work&quot;</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="n">model</span> <span class="o">=</span> <span class="n">get_default_echo_hardware</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="linenos">30</span><span class="n">frontend</span> <span class="o">=</span> <span class="n">AutoFrontend</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">Qasm2Frontend</span><span class="p">(</span><span class="n">model</span><span class="p">),</span> <span class="n">MyCustomFrontend</span><span class="p">(</span><span class="n">model</span><span class="p">))</span>
<span class="linenos">31</span><span class="n">qasm_frontend</span> <span class="o">=</span> <span class="n">frontend</span><span class="o">.</span><span class="n">assign_frontend</span><span class="p">(</span><span class="n">qasm_program</span><span class="p">)</span>
<span class="linenos">32</span><span class="n">custom_frontend</span> <span class="o">=</span> <span class="n">frontend</span><span class="o">.</span><span class="n">assign_frontend</span><span class="p">(</span><span class="n">custom_program</span><span class="p">)</span>
<span class="linenos">33</span><span class="n">no_frontend</span> <span class="o">=</span> <span class="n">frontend</span><span class="o">.</span><span class="n">assign_frontend</span><span class="p">(</span><span class="n">invalid_program</span><span class="p">)</span>
</pre></div>
</div>
<p>The types of the returned objects will be
<a class="reference internal" href="../qat.frontend.qasm.html#qat.frontend.qasm.Qasm2Frontend" title="qat.frontend.qasm.Qasm2Frontend"><code class="xref py py-class docutils literal notranslate"><span class="pre">Qasm2Frontend</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">MyCustomFrontend`and</span>
<span class="pre">:class:`NoneType</span></code> respectively.</p>
</section>
<section id="alternative-frontends">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Alternative frontends</a><a class="headerlink" href="#alternative-frontends" title="Link to this heading"></a></h3>
<p>QAT also has a few other frontends available:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../qat.frontend.fallthrough.html#qat.frontend.fallthrough.FallthroughFrontend" title="qat.frontend.fallthrough.FallthroughFrontend"><code class="xref py py-class docutils literal notranslate"><span class="pre">FallthroughFrontend</span></code></a>: Simply passes
through the source program. Used in situations where no frontend is required.</p></li>
<li><p><a class="reference internal" href="../qat.frontend.custom.html#qat.frontend.custom.CustomFrontend" title="qat.frontend.custom.CustomFrontend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CustomFrontend</span></code></a>: Allows a custom
pipeline-oriented frontend to be defined.</p></li>
</ul>
</section>
</section>
<section id="middleend">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Middleend</a><a class="headerlink" href="#middleend" title="Link to this heading"></a></h2>
<p>The middleend module handles compilation responsibilities at the level of QAT IR. It is
passed a quantum program at the level of QAT IR, and applies a sequence of hardware-agnostic
passes that</p>
<ol class="arabic simple">
<li><p>Perform analysis on the IR,</p></li>
<li><p>Validate the IR has appropriate specified properties,</p></li>
<li><p>Transforms the IR (e.g. optimization and santisation of the IR).</p></li>
</ol>
<p>See <a class="reference internal" href="../qat.middleend.passes.html#module-qat.middleend.passes" title="qat.middleend.passes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">qat.middleend.passes</span></code></a> for a full list of available passes.</p>
<section id="default-middleend">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Default Middleend</a><a class="headerlink" href="#default-middleend" title="Link to this heading"></a></h3>
<p>The standard middleend to use is the
<a class="reference internal" href="../qat.middleend.middleends.html#qat.middleend.middleends.DefaultMiddleend" title="qat.middleend.middleends.DefaultMiddleend"><code class="xref py py-class docutils literal notranslate"><span class="pre">DefaultMiddleend</span></code></a>, which has a
pre-defined pipeline.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">qat.middleend</span><span class="w"> </span><span class="kn">import</span> <span class="n">DefaultMiddleend</span>
<span class="n">middleend</span> <span class="o">=</span> <span class="n">DefaultMiddleend</span><span class="p">(</span><span class="n">hardware_model</span><span class="p">)</span>
<span class="n">ir</span> <span class="o">=</span> <span class="n">middleend</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">ir</span><span class="p">)</span>
</pre></div>
</div>
<p>Despite being hardware-agnostic, the middleend needs to be instantiated with the hardware
model.
Note that here hardware-agnostic means that it does not depend on the code-generation
related details of the target. However, the calibration file is still required to produce
the correction QAT IR instructions. Calling <code class="code docutils literal notranslate"><span class="pre">middleend.emit(ir)</span></code> will instruct the
middleend to pass the IR through the compilation pipeline.</p>
</section>
<section id="custom-middleend">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Custom Middleend</a><a class="headerlink" href="#custom-middleend" title="Link to this heading"></a></h3>
<p>We can specify a middleend with a custom compilation pipeline using the
<a class="reference internal" href="../qat.middleend.middleends.html#qat.middleend.middleends.CustomMiddleend" title="qat.middleend.middleends.CustomMiddleend"><code class="xref py py-class docutils literal notranslate"><span class="pre">CustomMiddleend</span></code></a> class. For example, the
following middleend would optimise over phase shifts and remove any unnecessary
post-processing instructions to reduce the overall instruction count.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">qat.middleend</span><span class="w"> </span><span class="kn">import</span> <span class="n">CustomMiddleend</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qat.passes.pass_base</span><span class="w"> </span><span class="kn">import</span> <span class="n">PassManager</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qat.compiler.transform_passes</span><span class="w"> </span><span class="kn">import</span> <span class="n">PhaseOptimisation</span><span class="p">,</span> <span class="n">PostProcessingSanitisation</span>

<span class="n">pipeline</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">PassManager</span><span class="p">()</span>
    <span class="o">|</span> <span class="n">PhaseOptimisation</span><span class="p">()</span>
    <span class="o">|</span> <span class="n">PostProcessingSanitisation</span><span class="p">()</span>
<span class="p">)</span>
<span class="n">middleend</span> <span class="o">=</span> <span class="n">CustomMiddleend</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">pipeline</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="backend">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Backend</a><a class="headerlink" href="#backend" title="Link to this heading"></a></h2>
<p>After we have compiled the source program to QAT IR, and performed any validation and
transformation we wish to do at the level of QAT IR, the program will enter the backend.
The objective of the backend is to compile the QAT IR into a language understandable by the
target, a process referred to as “code generation” (codegen). Like the frontend, the backend
has two components:</p>
<ol class="arabic simple">
<li><p>A compilation pipeline which performs analysis on the IR which is used during codegen,
validation passes to verify the code is compatible with the native code, and
transformation passes to make the intermediate code more appropriate for the codegen.
See <a class="reference internal" href="../qat.backend.passes.html#module-qat.backend.passes" title="qat.backend.passes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">qat.backend.passes</span></code></a> for a full list of passes (which might be target specific).</p></li>
<li><p>An emitter that walks through the QAT IR and generates native code.</p></li>
</ol>
<section id="waveformv1backend-example">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">WaveformV1Backend example</a><a class="headerlink" href="#waveformv1backend-example" title="Link to this heading"></a></h3>
<p>As an example, lets consider the
<a class="reference internal" href="../qat.backend.waveform_v1.codegen.html#qat.backend.waveform_v1.codegen.WaveformV1Backend" title="qat.backend.waveform_v1.codegen.WaveformV1Backend"><code class="xref py py-class docutils literal notranslate"><span class="pre">WaveformV1Backend</span></code></a>, a backend
that generates code for earlier (and now legacy) iterations of OQC hardware, but is still
maintained for some of our simulators and demonstration purposes. Like the frontend and
middleend, the emitter can be used to generate native code by calling the <code class="code docutils literal notranslate"><span class="pre">emit</span></code>
method,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">qat.backend.waveform_v1</span><span class="w"> </span><span class="kn">import</span> <span class="n">WaveformV1Backend</span>
<span class="n">backend</span> <span class="o">=</span> <span class="n">WaveformV1Backend</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="n">pkg</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">ir</span><span class="p">)</span>
</pre></div>
</div>
<p>The package returned from a backend is referred to as an
<a class="reference internal" href="../qat.runtime.executables.html#qat.runtime.executables.Executable" title="qat.runtime.executables.Executable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Executable</span></code></a>. They are Pydantic data classes
that contain all the information needed to execute a program, including the instructions
needed by the control hardware (or simulator), and the classical post-processing
instructions required by the runtime needed to interpret and process the results (see the
execution section for more details).</p>
</section>
</section>
<section id="making-ends-meet">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Making ends meet</a><a class="headerlink" href="#making-ends-meet" title="Link to this heading"></a></h2>
<p>Now that we have covered each type of “end”, we can bring it together to define a complete
compilation pipeline. Let’s write one that compiles to “WaveformV1”.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">qat.model.loaders.legacy</span><span class="w"> </span><span class="kn">import</span> <span class="n">EchoModelLoader</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qat.frontend</span><span class="w"> </span><span class="kn">import</span> <span class="n">AutoFrontend</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qat.middleend</span><span class="w"> </span><span class="kn">import</span> <span class="n">DefaultMiddleend</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">qat.backend.waveform_v1</span><span class="w"> </span><span class="kn">import</span> <span class="n">WaveformV1Backend</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">compiler_config.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">CompilerConfig</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">EchoModelLoader</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="n">frontend</span> <span class="o">=</span> <span class="n">AutoFrontend</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="n">middleend</span> <span class="o">=</span> <span class="n">DefaultMiddleend</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="n">backend</span> <span class="o">=</span> <span class="n">WaveformV1Backend</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>

<span class="n">qasm_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">OPENQASM 2.0;</span>
<span class="s2">include &quot;qelib1.inc&quot;;</span>
<span class="s2">qreg q[2];</span>
<span class="s2">creg c[2];</span>
<span class="s2">h q[0];</span>
<span class="s2">cx q[0], q[1];</span>
<span class="s2">measure q -&gt; c;</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">CompilerConfig</span><span class="p">(</span><span class="n">repeats</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>


<span class="n">ir</span> <span class="o">=</span> <span class="n">frontend</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">qasm_str</span><span class="p">,</span> <span class="n">compiler_config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
<span class="n">ir</span> <span class="o">=</span> <span class="n">middleend</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">ir</span><span class="p">,</span> <span class="n">compiler_config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
<span class="n">pkg</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">ir</span><span class="p">,</span> <span class="n">compiler_config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<p>The result will be a freshly prepared package ready for execution! Notice that this just
achieves what <code class="code docutils literal notranslate"><span class="pre">QAT().compile()</span></code> would, but not as neatly wrapped up.</p>
</section>
</section>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pipelines.html" class="btn btn-neutral float-left" title="Pipelines" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="execution.html" class="btn btn-neutral float-right" title="Execution" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Oxford Quantum Circuits Ltd.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: main
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Branches</dt>
      <dd><a href="compilation.html">main</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>